{% block content %}
<div class="row"> <!-- Current number of people -->

<!-- Dodaj tę sekcję w odpowiednim miejscu, np. po nagłówku -->
 
  <!-- zawartość kafelka pogody -->


  <div class="col-xxl-4 col-md-6">
    <div class="card info-card small-card weather-card">
      <div class="card-body">
        <h5 class="card-title">
          Pogoda | <span class="text-capitalize">{{ weather.description|default:"--" }}</span>
        </h5>
        <div class="d-flex align-items-center">
          <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" style="background: #f0f4fa;">
            {% if weather and weather.icon %}
              <img src="https://openweathermap.org/img/wn/{{ weather.icon }}@2x.png" alt="{{ weather.description|default:'Ikona pogody' }}" style="width:64px;height:64px;object-fit:contain;display:inline-block;vertical-align:middle;">
            {% else %}
              <img src="" alt="Ikona pogody" style="width:64px;height:64px;">
            {% endif %}
          </div>
          <div class="ps-3">
            <h6>{{ weather.temp|default:"--" }}°C</h6>
            <div class="text-muted small pt-1">
              Odczuwalna: {{ weather.feels_like|default:"--" }}°C | Wilgotność: {{ weather.humidity|default:"--" }}%
            </div>
          </div>
        </div>
      </div>
      <div class="ps-3">
        <a href="https://www.google.com/maps?q=Białystok" target="_blank"><b>Białystok</b></a>
      </div>
    </div>
  </div>


    <!-- Small -->
    <div class="col-xxl-4 col-md-6">

      <div class="card info-card small-card">

        <div class="card-body">
          <h5 class="card-title">Pływalnia kameralna <span>| Teraz 
            <!-- red colour if over 80% occupacy -->
            <span class={% if small_percent < 80 %}
            "text-success small pt-1"
            {% else %}
            "text-danger small pt-1"
            {% endif %}>
            {{small_percent}}%</span> zajęte</span>
          </h5>
          <div class="d-flex align-items-center">
            <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" data-bs-toggle="modal" data-bs-target="#small_popup">
              <i class="fas fa-swimmer"></i>
            </div>
            <div class="ps-3">
              <h6>{{lastsmall}}</h6>
              <span class="text small pt-1 fw-bold">30</span><span class="text-muted small pt-2 ps-1">osób max</span>

            </div>
          </div>
        </div>
        <div class="ps-3">    
          <a href="https://maps.app.goo.gl/YTTwYV16m3tyxoW76" target="_blank"><b>Mazowiecka 39C, 15-302 Białystok</b></a> 
        </div>
      </div> 
    </div><!-- End Small --> 

    <!-- Sport -->
    <div class="col-xxl-4 col-md-6">
      <div class="card info-card sport-card">
        <div class="card-body">
          <h5 class="card-title">Pływalnia sportowa <span>| Teraz 
          <!-- red colour if over 80% occupacy -->
            <span class={% if sport_percent < 80 %}
            "text-success small pt-1"
            {% else %}
            "text-danger small pt-1"
            {% endif %}>
            {{sport_percent}}%</span> zajęte</span></h5>

          <div class="d-flex align-items-center">
            <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" data-bs-toggle="modal" data-bs-target="#sport_popup">
              <i class="fas fa-swimmer"></i>
            </div>
            <div class="ps-3">
              <h6>{{lastsport}}</h6>
              <span class="text small pt-1 fw-bold">105</span><span class="text-muted small pt-2 ps-1">osób max</span>
            </div>
          </div>
        </div>
        <div class="ps-3">
          <a href="https://maps.app.goo.gl/KXXXf2iYu16VJgCz5" target="_blank"><b>Włókiennicza 4, 15-465 Białystok</b></a>
        </div>
      </div>
    </div><!-- End Sport -->

    <!-- Family -->
    <div class="col-xxl-4 col-md-6">
      <div class="card info-card family-card"> 
        <div class="card-body">
          <h5 class="card-title">Pływalnia rodzinna <span>| Teraz 
            <!-- red colour if over 80% occupacy -->
            <span class={% if family_percent < 80 %}
            "text-success small pt-1"
            {% else %}
            "text-danger small pt-1"
            {% endif %}>
            {{family_percent}}%</span> zajęte</span></h5>

          <div class="d-flex align-items-center">
            <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" data-bs-toggle="modal" data-bs-target="#family_popup">
              <i class="fas fa-swimmer"></i>
            </div>
            <div class="ps-3">
              <h6>{{lastfamily}}</h6>
              <span class="text small pt-1 fw-bold">150</span><span class="text-muted small pt-2 ps-1">osób max</span>

            </div>
          </div>
        </div>
        <div class="ps-3">
          <a href="https://maps.app.goo.gl/gpSoMPBoRtcT9dw89" target="_blank"><b>Stroma 1A, 15-661 Białystok</b></a>
        </div>
      </div>
    </div><!-- End Family -->

        <!-- Ice -->
        <div class="col-xxl-4 col-md-6">
          <div class="card info-card ice-card"> 
            <div class="card-body">
              <h5 class="card-title">Lodowisko <span>| Teraz 
                <!-- red colour if over 80% occupacy -->
                <span class={% if ice_percent < 80 %}
                "text-success small pt-1"
                {% else %}
                "text-danger small pt-1"
                {% endif %}>
                {{ice_percent}}%</span> zajęte</span></h5>
    
              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" data-bs-toggle="modal" data-bs-target="#ice_popup">
                  <i class="fas fa-skating"></i>
                </div>
                <div class="ps-3">
                  <h6>{{lastice}}</h6>
                  <span class="text small pt-1 fw-bold">300</span><span class="text-muted small pt-2 ps-1">osób max</span>
    
                </div>
              </div>
            </div>
            <div class="ps-3">
              
              <a href="https://maps.app.goo.gl/WTfr4wwKsGnKtJUQ9" target="_blank"><b>11 Listopada 28, 15-320 Białystok</b></a>
            </div>
          </div>
        </div><!-- End Ice -->

        <!-- Aquapark -->
        <style> .dashboard .aquapark-card .card-icon {
          color: #6a269a;
          background: #f6f6fe;
        }</style>
        <!-- Counter to aquapark opening date -->
        <script>
          // Set the target date (December 15, 2028)
        const targetDate = new Date('2028-12-15T00:00:00').getTime();
        
        // Update the countdown every second
        const countdownTimer = setInterval(function() {
            // Get current date and time
            const now = new Date().getTime();
            
            // Calculate the remaining time
            const distance = targetDate - now;
            
            // Time calculations for days, hours, minutes and seconds
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Update days text
            const daysElement = document.querySelector('.aquapark-card h6 a');
            if (daysElement) {
                daysElement.textContent = `Otwarcie za ${days} dni`;
            }
            
            // Update detailed countdown text
            const detailsElement = document.querySelector('.aquapark-card .text.small a b');
            if (detailsElement) {
                detailsElement.textContent = `${hours} godzin, ${minutes} minut, ${seconds} sekund`;
            }
            
            // If the countdown is finished, display a message
            if (distance < 0) {
                clearInterval(countdownTimer);
                if (daysElement) {
                    daysElement.textContent = "Aquapark jest już otwarty!";
                }
                if (detailsElement) {
                    detailsElement.textContent = "Zapraszamy!";
                }
            }
        }, 1000);
        </script>

        <div class="col-xxl-4 col-md-6">
          <div class="card info-card aquapark-card">
            <div class="card-body">
              <h5 class="card-title">Aquapark Andersa <span>| Grudzień 2028</span></h5>
              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="fas fa-swimmer"></i>
                </div>
                <div class="ps-3">
                  <h6><a href="https://www.lech.net.pl/pl/aktualnosci/bedziemy-budowac-aquapark-w-bialymstoku-.html" target="_blank">Otwarcie za 1475 dni</a></h6>
                  <span class="text small pt-1 fw-bold"><a href="https://www.lech.net.pl/pl/aktualnosci/bedziemy-budowac-aquapark-w-bialymstoku-.html" target="_blank"><b>12 godzin, 43 minut, 33 sekund</b></a></span>
                </div>
              </div>
            </div>
    
          </div>
        </div><!-- End aquapark -->

        <!-- Fb -->
        <div class="col-xxl-4 col-md-6">
          <div class="card info-card fb-card">
            <div class="card-body">
              <h5 class="card-title">Bądź na bieżąco</h5>
              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <a href="https://www.facebook.com/basenbialystok/" target="_blank"><i class="ri-facebook-box-fill"></i></a>
                </div>
                <div class="ps-3">
                  <h6><a href="https://www.facebook.com/basenbialystok/" target="_blank">Polub nas na FB!</a></h6>
                  <span class="text small pt-1 fw-bold"><a href="https://www.facebook.com/basenbialystok/" target="_blank"><b>Facebook</b></a></span>
                </div>
              </div>
            </div>
    
          </div>
        </div><!-- End Fb -->

  </div> <!-- End current number of people -->



  {% include 'popup_small.html' %}
  {% include 'popup_sport.html' %}
  {% include 'popup_family.html' %}
  {% include 'popup_ice.html' %}
  {% endblock %}