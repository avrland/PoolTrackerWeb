{% block content %}
<div class="col-12"> <!-- Live chart section start -->
    <div class="card">

      <div class="card-body">
        <h5 class="card-title">Dzisiaj <span>| Ostatnia aktualizacja: {{ lastdate }}</span></h5>

        <!-- Line Chart -->
        <div id="reportsChart"></div>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const chart = new ApexCharts(document.querySelector("#reportsChart"), {
              series: [{
                name: 'Sportowa',
                data: {{ sport|safe }}
              }, {
                name: 'Rodzinna',
                data: {{ family|safe }}
              }, {
                name: 'Kameralna',
                data:  {{ small|safe }}
              }],
              chart: {
                height: 350,
                type: 'area',
                toolbar: {
                  show: false
                },
              },
              markers: {
                size: 2.5
              },
              colors: ['#4154f1', '#2eca6a', '#ff771d'],
              fill: {
                type: "gradient",
                gradient: {
                  shadeIntensity: 1,
                  opacityFrom: 0.3,
                  opacityTo: 0.4,
                  stops: [0, 90, 100]
                }
              },
              dataLabels: {
                enabled: false
              },
              stroke: {
                curve: 'smooth',
                width: 2
              },
              xaxis: {
                type: 'datetime',
                categories: {{date|safe}}
              },
              annotations: {
                    yaxis: [
                      {
                        y: 30,
                        borderColor: '#ff771d',
                        borderWidth: 2,
                      },
                      {
                        y: 105,
                        borderColor: '#4154f1',
                        borderWidth: 2
                      },
                      {
                        y: 150,
                        borderColor: '#2eca6a',
                        borderWidth: 2
                      },
                    ],
              },
              tooltip: {
                x: {
                  format: 'dd/MM/yy HH:mm'
                }
              }
            });
            chart.render();
            document.querySelector("#reportsChart").addEventListener("contextmenu", (e) => {
                e.preventDefault(); // prevent default context menu from showing
                chart.resetSeries(); // reset zoom level
            }); 
          });
        </script>
        <!-- End Line Chart -->
      </div>
    </div>
  </div><!-- End of live chart section  -->
  {% endblock %}